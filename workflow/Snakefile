from snakemake.utils import min_version
min_version("6.0")
import os

configfile: "config/config.yml"


rule all:
    input:
        expand("results/03_benchmark/{dataset}/03_benchmark_comp/AUROC.pdf", dataset = ["hernandez", "hijazi", "merged"]),
        expand("results/03_benchmark/{dataset}/03_benchmark_comp/combined_ranks.csv", dataset = ["hernandez", "hijazi", "merged"]),
        expand("results/03_benchmark/{dataset}/02_benchmark_res_subset/predicted/{PKN}/bench_{hernandez_methods}-{PKN}.csv", dataset = ["hernandez"], hernandez_methods = config["perturbation"]["methods"], PKN = config["perturbation"]["predicted"]),
        expand("results/03_benchmark/{dataset}/02_benchmark_res_subset/johnson/{PKN}/bench_{hernandez_methods}-{PKN}.csv", dataset = ["hernandez"], hernandez_methods = config["perturbation"]["methods"], PKN = config["perturbation"]["johnson"]),
        #expand("results/cptac/activity_scores/{PKN}/original/original_{dataset}-{PKN}.rds", dataset = config["cptac"]["datasets"], PKN = config["cptac"]["cptac_PKNs"]),

rule priors:
    input:
        expand("results/00_prior/{prior}.tsv", prior = config["general"]["PKNs"])

rule predicted:
    input:
        expand("results/03_benchmark/{dataset}/02_benchmark_res_subset/predicted/{PKN}/bench_{hernandez_methods}-{PKN}.csv", dataset = ["hernandez", "hijazi", "merged"], hernandez_methods = config["perturbation"]["methods"], PKN = config["perturbation"]["predicted"]),
        expand("results/03_benchmark/{dataset}/02_benchmark_res_subset/johnson/{PKN}/bench_{hernandez_methods}-{PKN}.csv", dataset = ["hernandez", "hijazi", "merged"], hernandez_methods = config["perturbation"]["methods_johnson"], PKN = config["perturbation"]["johnson"]),
        expand("results/03_benchmark/{dataset}/02_benchmark_res/{PKN}/bench_{hernandez_methods}-{PKN}.csv", dataset = ["hernandez", "hijazi", "merged"], hernandez_methods = config["perturbation"]["methods"], PKN = config["perturbation"]["all"])

rule figures:
    input:
        "results/manuscript_figures/figure_1/coverage_merged.pdf",
        "results/manuscript_figures/figure_2/overview_experiment.pdf",
        "results/manuscript_figures/figure_3/auroc_res.pdf"
        #"results/manuscript_figures/supp_figures/predicted_combined.pdf"



# Module for prior processing
module prior:
    snakefile: "rules/prior.smk"
    config: config
use rule * from prior as prior_*

# Module for cptac processing
module processing_cptac:
    snakefile: "rules/processing_cptac.smk"
    config: config
use rule * from processing_cptac as processing_cptac_*

# Module for hernandez processing
module processing_hernandez:
    snakefile: "rules/processing_hernandez.smk"
    config: config
use rule * from processing_hernandez as processing_hernandez_*

# Module for hijazi processing
module activity_estimation:
    snakefile: "rules/activity_estimation.smk"
    config: config
use rule * from activity_estimation as activity_estimation_*

# Module for activity estimation
module processing_hijazi:
    snakefile: "rules/processing_hijazi.smk"
    config: config
use rule * from processing_hijazi as processing_hijazi_*

# Module for benchmark
module benchmark:
    snakefile: "rules/benchmark.smk"
    config: config
use rule * from benchmark as benchmark_*

# Module for figures
module figures:
    snakefile: "rules/figures.smk"
    config: config
use rule * from figures as figures_*


