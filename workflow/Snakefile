from snakemake.utils import min_version
min_version("6.0")
import os

configfile: "config/config.yml"


rule all:
    input:
        expand("results/00_prior/{prior}.tsv", prior = config["general"]["PKNs"]),
        expand("results/02_activity_scores/hernandez/final_scores/{PKN}.rds",  PKN = config["hernandez"]["hernandez_PKNs"]),
        expand("results/02_activity_scores/hijazi/final_scores/{PKN}.rds",  PKN = config["hijazi"]["hijazi_PKNs"])
        #expand("results/cptac/activity_scores/{PKN}/original/original_{dataset}-{PKN}.rds", dataset = config["cptac"]["datasets"], PKN = config["cptac"]["cptac_PKNs"]),
        #"results/hijazi/06_benchmark_res/plots/AUPRC_scaled.pdf",
        #"results/hijazi/06_benchmark_res/plots/AUPRC_merged.pdf",
        #expand("results/hernandez/final_scores/raw/{PKN}.rds", PKN = config["hernandez"]["hernandez_PKNs"])
        #expand("results/hernandez/benchmark_res/{PKN}/scaled/bench_{hernandez_methods}-{PKN}.csv", hernandez_methods = config["hernandez"]["hernandez_methods"], PKN = config["hernandez"]["hernandez_PKNs"]),
        #"results/prior/raw/johnson99.tsv",
        #expand("results/hernandez/benchmark_res/plots/AUROC_{overlap}.pdf", overlap = config["hernandez"]["hernandez_overlap"]),
        #expand("results/hernandez/benchmark_mean_rank/mean_rank_{overlap}.csv", overlap = config["hernandez"]["hernandez_overlap"]),
        #Figures
        #"results/manuscript_figures/figure_1/coverage_merged.pdf",
        #"results/manuscript_figures/figure_2/overview_experiment.pdf",
        #"results/manuscript_figures/figure_3/auroc_res.pdf",
        #expand("results/hijazi/06_benchmark_res/{PKN}/merged/bench_{method}-{PKN}.csv", PKN = config["hernandez"]["hernandez_PKNs_subset"], method = config["hernandez"]["hernandez_methods"])

# Module for prior processing
module prior:
    snakefile: "rules/prior.smk"
    config: config
use rule * from prior as prior_*

# Module for cptac processing
module processing_cptac:
    snakefile: "rules/processing_cptac.smk"
    config: config
use rule * from processing_cptac as processing_cptac_*

# Module for hernandez processing
module processing_hernandez:
    snakefile: "rules/processing_hernandez.smk"
    config: config
use rule * from processing_hernandez as processing_hernandez_*

# Module for hijazi processing
module activity_estimation:
    snakefile: "rules/activity_estimation.smk"
    config: config
use rule * from activity_estimation as activity_estimation_*

# Module for activity estimation
module processing_hijazi:
    snakefile: "rules/processing_hijazi.smk"
    config: config
use rule * from processing_hijazi as processing_hijazi_*

# Module for figures
module figures:
    snakefile: "rules/figures.smk"
    config: config
use rule * from figures as figures_*


